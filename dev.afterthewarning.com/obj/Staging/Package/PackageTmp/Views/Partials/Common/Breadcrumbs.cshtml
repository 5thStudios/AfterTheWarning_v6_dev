@using Models;
@inherits UmbracoViewPage


@{
    //Obtain current page as strongly typed ip
    int? currentPageId = UmbracoContext.Current.PageId;
    IPublishedContent ipCurrentPg = Umbraco.TypedContent(currentPageId);


    //
    if (ipCurrentPg.DocumentTypeAlias == Common.docType.Home)
    {
        <h1>Welcome</h1>
    }
    else if (ipCurrentPg.DocumentTypeAlias == Common.docType.Search)
    {
        <h3>Results</h3>
    }
    else
    {
        //Obtain the breadcrumb ancestors of the current page.
        var lstBreadcrumbs = ipCurrentPg.Ancestors();
        bool isFirst = true;

        <nav class="breadcrumbs">
            @if (lstBreadcrumbs.Count() == 1)
            {
                <span class="divider">»</span>
                <a href="/" class="breadcrumb">Home</a>
            }
            else
            {
                foreach (IPublishedContent ipCrumb in lstBreadcrumbs.OrderBy(x => x.Level).ToList())
                {
                    //Add crumb only if the page can be displayed in the menu.
                    if (ipCrumb.HasProperty(Common.NodeProperties.umbracoNaviHide) && ipCrumb.GetPropertyValue<bool>(Common.NodeProperties.umbracoNaviHide) == false)
                    {
                        //Only add divider after first entry
                        if (isFirst)
                        {
                            isFirst = false;
                            <span class="divider">»</span>
                            <a href="/" class="breadcrumb">Home</a>
                            <span class="divider">»</span>
                        }
                        else
                        {<span class="divider">»</span>}

                        //Add crumb navigation to screen
                        <a href="@ipCrumb.Url" class="breadcrumb">@ipCrumb.Name</a>
                    }
                    @*else
                    {
                        //Exit loop if a parent node cannot be displayed.
                        if (ipCrumb.DocumentTypeAlias != Common.docType.Home)
                        {
                            <span class="divider">»</span>
                            <a href="/" class="breadcrumb">Home</a>
                            break;
                        }
                    }*@
                }
            }
        </nav>
    }
}



@*http://www.jondjones.com/learn-umbraco-cms/umbraco-developers-guide/umbraco-component-tutorials/how-to-create-a-breadcrumb-using-umbraco-cms*@